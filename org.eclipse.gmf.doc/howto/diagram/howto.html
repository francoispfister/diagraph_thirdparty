<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1" />
<link rel="Stylesheet" type="text/css" href="../technote.css" />
<title>Diagram Services Layer - How-to Guide</title>
</head>
<body lang="EN-US" link="blue" vlink="blue">
<a id="top" name="top"></a><img src="../../logo.gif" border="0" /> 

<h1 align="center">Diagram Services Layer - How-to Guide</h1>

<table border="0" cellspacing="8" cellpadding="0">
<tr>
<td>Version: 0.1</td>
<td>Date: August 11, 2005</td>
</tr>
</table>

<h2>Contents</h2>

<ul>
<li><a href="#introduction">Introduction</a></li>

<li><a href="#refs">References</a></li>

<li><a href="#notationStyles">How to add new notation styles to an
existing shape</a></li>

<li><a href="#clipboardFramework"></a><a
href="#overrideShapeLook">How to override an existing shapes
look</a></li>

<li><a href="#validationFramework"><a id="preferenceChange0"
name="preferenceChange0" href="#preferenceChange">How to change
shape appearances based on a global preference change</a></a></li>

<li><a id="overrideConnectionLook0" href="#overrideConnectionLook"
name="overrideConnectionLook0">How to override the look of a
connection</a></li>
</ul>

<ul class="noindent">
<li><a href="#readOnlyViews"><span class="GramE"><span
style="mso-bookmark: _Toc105513761"><a id="readOnlyViews0"
name="readOnlyViews0" href="#readOnlyViews">How to open multiple
read-only views on a diagram</a></span></span></a></li>

<li><a id="changeColor0" name="changeColor0"
href="#changeColor">How to</a> <a href="#changeColor"><span
style="mso-bookmark:_Toc105513763">change the color of a shape
dynamically</span></a></li>

<li><a id="shapeResizable0" name="shapeResizable0"
href="#shapeResizable">How to make a shape resizable vs.
non-resizable</a></li>
</ul>

<hr />
<h2><a id="introduction" name="introduction"></a></h2>

Introduction 

<p class="backto"><font size="-1">[<a href="#top">back to
top</a>]</font></p>

<p>This guide is a repository for questions on how to accomplish
specific tasks within the diagram services layer.</p>

<h2><a id="refs" name="refs"></a>References</h2>

<p class="backto"><font size="-1">[<a href="#top">back to
top</a>]</font></p>

<h2><span style="mso-bookmark:_Toc105513756"><a id="notationStyles"
name="notationStyles">How to add notation styles to an existing
shape</a></span></h2>

<p class="backto"><font size="-1">[<a href="#top">back to
top</a>]</font></p>

<p style="text-indent:0in;mso-list:none">Each shape node view class
(Node) will typically need to install a set of styles that allow a
certain look of the notation to be persisted.<span
style="mso-spacerun:yes">&nbsp;</span> Usually the default style
<span class="SpellE">ShapeStyle</span> will be adequate since this
covers colors, text, etc.<span
style="mso-spacerun:yes">&nbsp;</span> However, it may be useful to
add additional styles and/or have custom styles not accounted for
in the notation meta-model (<span
class="SpellE">org.eclipse.gmf.runtime.notation</span>).<span
style="mso-spacerun:yes">&nbsp;</span> For instance, a domain
editor may wish to toggle the display of a particular shape to have
different looks.<span style="mso-spacerun:yes">&nbsp;</span> The
property to store this is notational and consequently should be
part of the notation meta-model.<span
style="mso-spacerun:yes">&nbsp;</span></p>

<p>Create a new notation meta-model sub-class.<span
style="mso-spacerun:yes">&nbsp;</span> Since the property is
typically an attribute of a node, this can be represented in a
Style subclass.</p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
org.eclipse.gmf.runtime.notation plug-in and fine in the source
directories the cat file \<span
class="SpellE">src\rosemodel\org.eclipse.gmf.runtime.notation.Notation.cat</span>
and the <span class="SpellE">org.eclipse.emf.Ecore.cat</span>
files.</p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
LogicalView describing your notation meta-model (i.e. <span
class="SpellE">mynotation</span>)</p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
mynotation"</p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
mynotation</p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
&nbsp; Hit "Next" until you get to the "Package Selection"
page.</p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
org.eclipse.gmf.runtime.notation/src/model) and in the right hand
pane select <span class="SpellE">notation.genmodel</span>.</p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
Ecore check-boxes under the notation root.</p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
mynotation</p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
mynotation.genmodel.<span style="mso-spacerun:yes">&nbsp;</span>
Right click on the root in the editor and choose "Generate Model
Code" and the "Generate Edit Code" menu items.</p>

<h4 class="MsoNormal"><span class="GramE">Modifying an already
existing and generated notation meta-model.</span></h4>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l1 level1 lfo6; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
&nbsp; In the directory/<span class="SpellE">src</span>/model,
right click on the <span class="SpellE">mynotation.genmodel</span>
file and choose "reload" to reflect the changes.<span
style="mso-spacerun:yes">&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l1 level1 lfo6; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
mynotation.genmodel.<span style="mso-spacerun:yes">&nbsp;</span>
Right click on the root in the editor and choose "Generate Model
Code" and the "Generate Edit Code" menu items.</p>

<h4><a id="_Toc105513757" name="_Toc105513757">Reflect the changes
of the new style value on the diagram editor</a></h4>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
createStyles" function of View Factory subclass that creates the
top level view you wish to store the style on.</p>

<p class="MsoNormal"
style="margin-left:.75in;text-indent:-.25in;mso-list:l2 level1 lfo4; tab-stops:list .75in">
-<span style="font:7.0pt " times=""
new="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
refreshVisuals" and "<span
class="SpellE">handlePropertyChangeEvent</span>" functions in the
<span class="SpellE">EditPart</span> class associated with the
notation view and create new function "<span
class="SpellE">refreshValue"</span> called within the
"refreshVisuals" override which will perform the update of the
figures based on the style change.<br />
</p>

<div
style="border:solid windowtext 1.0pt;mso-border-alt:solid windowtext .75pt; padding:4.0pt 4.0pt 4.0pt 4.0pt;margin-left:48.0pt;margin-right:24.0pt">
Code Snippet:<br />
<br />
<font face="Courier New" size="-1">protected void
handlePropertyChangeEvent( PropertyChangeEvent evt) {<br />
&nbsp;&nbsp;&nbsp;if
(evt.getPropertyName().equals(MetaModelUtil.getID(MyNotationPackage.eINSTANCE.getMyStyle_Value())))<br />
&nbsp;&nbsp;&nbsp;refreshValue();<br />
else<br />
&nbsp;&nbsp;&nbsp;super.handlePropertyChangeEvent(evt);<br />
}</font><br />
<br />
<font face="Courier New" size="-2">/**<br />
<span style="mso-spacerun:yes">&nbsp;</span>* Apart from the usual
visual update, it also<br />
<span style="mso-spacerun:yes">&nbsp;</span><span class="GramE">*
updates any necessary values in the figure world<br />
</span><span style="mso-spacerun:yes">&nbsp;</span>*/<br />
<span class="GramE">protected</span> void <span
class="SpellE">refreshVisuals</span>() {<br />
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">super.refreshVisuals</span></span><span
class="GramE">(</span>);<br />
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">refreshValue</span></span><span
class="GramE">(</span>);<br />
}</font><br />
<br />
 <font face="Courier New" size="-2">/**<br />
<span style="mso-spacerun:yes">&nbsp;</span>* Refreshes the style
value property<span style="mso-spacerun:yes">&nbsp;</span><br />
 &nbsp;*/<br />
<span class="GramE">protected</span> void <span
class="SpellE">refreshValue</span>(){<br />
 <span class="SpellE">MyStyle</span> style =<span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
(<span class="SpellE">MyStyle</span><span class="GramE">)<span
class="SpellE">getView</span></span>().<span
class="SpellE">getStyle</span>(<span
class="SpellE">mynotationPackage.eINSTANCE.getMyStyle</span>());<br />
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">if(</span>style != null)<br />
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">getMyFigure</span></span><span
class="GramE">(</span>).<span class="SpellE">setValue</span>(<span
class="SpellE">style.getValue</span>());<br />
}</font></div>

<h2><a id="overrideShapeLook" name="overrideShapeLook">How to
override an existing shapes look?</a></h2>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><font
size="-1">[<a href="#top">back to top</a>]</font><br />
</p>

<ol style="margin-top:0in" start="1" type="1">
<li class="MsoNormal"
style="color:black;mso-list:l6 level1 lfo9;tab-stops:list .5in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size: 10.0pt;font-family:Helv;mso-bidi-font-family:Helv">
First you'll need to determine the <span
class="SpellE">AbstractViewFactory</span> subclass that represents
the shape that you are creating.<span
style="mso-spacerun:yes">&nbsp;</span> This hierarchy is
responsible for the construction and initialization of the notation
that <span class="GramE">persists</span> the shape.<span
style="mso-spacerun:yes">&nbsp;</span> To determine this, find the
<span class="SpellE">ViewProvider</span> that provides the notation
for the View and the class should be in a map with the semantic
hint as a key.<span style="mso-spacerun:yes">&nbsp;</span>
Alternatively you could set a breakpoint in the <span
class="SpellE">AbstractViewFactory#createStyles</span> method and
see what type of View factory "this" is after a palette creation or
drag/drop operation.<span style="mso-spacerun:yes">&nbsp;</span>
This will be the View factory class that you will need to inherit
from in your provider.</span></li>
</ol>

<ol style="margin-top:0in" start="2" type="1">
<li class="MsoNormal"
style="color:black;mso-list:l6 level1 lfo9;tab-stops:list .5in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size: 10.0pt;font-family:Helv;mso-bidi-font-family:Helv">
If you don't already have a custom view provider for your shape the
following steps are necessary.<span
style="mso-spacerun:yes">&nbsp;</span> If you do, then proceed to
step (3).</span></li>

<li style="list-style: none">
<ol style="margin-top:0in" start="1" type="a">
<li class="MsoNormal"
style="color:black;mso-list:l6 level2 lfo9;tab-stops: list 1.0in;mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family:Helv">
Create a new subclass of <span
class="SpellE">AbstractViewProvider</span> to provide for your
shape.<span style="mso-spacerun:yes">&nbsp;</span> This is
necessary because you wish to customize the initialization of the
shape for your semantic domain.</span></li>

<li class="MsoNormal"
style="color:black;mso-list:l6 level2 lfo9;tab-stops: list 1.0in;mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family:Helv">
Add xml code in your plug-<span class="SpellE">in.xml</span> to
allow your new provider to provide for the semantic element.<span
style="mso-spacerun:yes">&nbsp;</span> To provide for a semantic
type some condition about the element the view is for, there is a
"method" tag that allows qualification of the provider (see
below).<span style="mso-spacerun:yes">&nbsp;</span> The xml
descriptor is a first line of defense to avoid loading your
plug-in.<span style="mso-spacerun:yes">&nbsp;</span></span></li>
</ol>
</li>
</ol>

<p class="MsoNormal"
style="text-indent:.5in;mso-layout-grid-align:none; text-autospace:none">
<span class="GramE"><span
style="font-size:10.0pt; font-family:Helv;mso-bidi-font-family:Helv;color:black">
Ex 1.</span></span><span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family:Helv;color:black">
<span style="mso-spacerun:yes">&nbsp;</span> <span
class="GramE">Using the semantic element as the element type to
provide against.</span></span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:"
courier="">&lt;extension</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:9.0pt;font-family:"
courier="">point</span></span><span
style="font-size:9.0pt; font-family:" courier="">=</span><span
style="font-size:9.0pt;font-family:" courier="">"<span
class="SpellE">org.eclipse.gmf.runtime.diagram.ui.viewProviders</span>"</span><span
 style="font-size:9.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:9.0pt; font-family:" courier="">&lt;<span
class="SpellE">viewProvider</span></span><span
style="font-size:9.0pt;font-family: " courier=""><span
style="mso-tab-count:1">&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span class="GramE"><span style="font-size:9.0pt; font-family:"
courier="">class</span></span><span
style="font-size:9.0pt;font-family:" courier="">=</span><span
style="font-size:9.0pt;font-family:" courier="">"&lt;<span
class="SpellE">YourFullyQualfiedClass</span>"</span><span
style="font-size:9.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:9.0pt;font-family:"
courier="">&lt;Priority</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:9.0pt;font-family:"
courier="">name</span></span><span
style="font-size:9.0pt;font-family: " courier="">=</span><span
style="font-size:9.0pt;font-family:"
courier="">"Highest"</span><span
style="font-size:9.0pt; font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:9.0pt;font-family:"
courier="">&lt;/Priority&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:9.0pt; font-family:"
courier="">&lt;object</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span class="GramE"><span style="font-size:9.0pt; font-family:"
courier="">class</span></span><span
style="font-size:9.0pt;font-family:" courier="">=</span><span
style="font-size:9.0pt;font-family:" courier="">"</span><span
style="font-size:9.0pt;font-family:" courier="">&lt;<span
class="SpellE">YourFullyQualfiedSemanticClassToProvideFor</span>&gt;<span
 style="background:white;mso-highlight:white">"</span></span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;</span></span><span
class="GramE"><span style="font-size:9.0pt;font-family:"
courier="">id</span></span><span
style="font-size:9.0pt;font-family: " courier="">=</span><span
style="font-size:9.0pt;font-family:" courier="">"Nodes"</span><span
style="font-size:9.0pt; font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:9.0pt; font-family:"
courier="">&lt;/object&gt;</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;</span> &lt;method name=?<span
class="SpellE"><span
class="GramE">getSomeMethodCallValue</span></span><span
class="GramE">(</span>?)? <span
class="SpellE">notValue</span>=?null?&gt;</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;</span> &lt;<span
class="GramE">context</span>&gt;</span><span
style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;</span></span> <span
class="SpellE"><span style="font-size:9.0pt;font-family:"
courier="">viewClass</span></span><span
style="font-size:9.0pt;font-family:" courier="">=</span><span
style="font-size:9.0pt;font-family:" courier="">"<span
class="SpellE">org.eclipse.gmf.runtime.notation.Node</span>"</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span lang="FR" style="font-size:9.0pt;font-family:"
courier="">semanticHints=</span><span lang="FR"
style="font-size:9.0pt;font-family:" courier="">""</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span lang="FR" style="font-size:9.0pt;font-family:"
courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span lang="FR" style="font-size:9.0pt;font-family:"
courier="">elements=</span><span lang="FR"
style="font-size:9.0pt;font-family:" courier="">"Nodes"</span><span
lang="FR" style="font-size:9.0pt;font-family:"
courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span lang="FR" style="font-size:9.0pt;font-family:"
courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span lang="FR" style="font-size: 9.0pt;font-family:"
courier="">&lt;/context&gt;</span><span lang="FR"
style="font-size: 9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.5in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span lang="FR" style="font-size:9.0pt;font-family: "
courier="">&lt;/viewProvider&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span lang="FR" style="font-size:9.0pt;font-family:"
courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;</span></span> <span
style="font-size:9.0pt; font-family:"
courier="">&lt;/extension&gt;</span></p>

<p class="MsoNormal" style="margin-left:.5in"><span
class="GramE">Ex 2.</span> Alternative is to check against the
proxy interface and retrieve the type ID.<span
style="mso-spacerun:yes">&nbsp;</span> This is useful if you wish
to provide your view against unresolved elements.<span
style="mso-spacerun:yes">&nbsp;</span> When an element is a proxy
you wouldn't be able to make a conditional check against some
semantic property because it wouldn't be accessible in the case of
an unresolved reference.<span
style="mso-spacerun:yes">&nbsp;</span> If the element were
unresolved the other overridden provider would kick-in instead.</p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:"
courier="">&lt;extension</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:9.0pt;font-family:"
courier="">point</span></span><span
style="font-size:9.0pt; font-family:" courier="">=</span><span
style="font-size:9.0pt;font-family:" courier="">"<span
class="SpellE">org.eclipse.gmf.runtime.diagram.ui.viewProviders</span>"</span><span
 style="font-size:9.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:9.0pt; font-family:" courier="">&lt;<span
class="SpellE">viewProvider</span></span><span
style="font-size:9.0pt;font-family: " courier=""><span
style="mso-tab-count:1">&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span class="GramE"><span style="font-size:9.0pt; font-family:"
courier="">class</span></span><span
style="font-size:9.0pt;font-family:" courier="">=</span><span
style="font-size:9.0pt;font-family:" courier="">"&lt;<span
class="SpellE">YourFullyQualfiedClass</span>"</span><span
style="font-size:9.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:9.0pt;font-family:"
courier="">&lt;Priority</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:9.0pt;font-family:"
courier="">name</span></span><span
style="font-size:9.0pt;font-family: " courier="">=</span><span
style="font-size:9.0pt;font-family:"
courier="">"Highest"</span><span
style="font-size:9.0pt; font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:9.0pt;font-family:"
courier="">&lt;/Priority&gt;</span></p>

<p class="MsoNormal"
style="margin-left:1.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:"
courier="">&lt;object</span><span
style="font-size:9.0pt;font-family:" courier="">class=</span><span
style="font-size:9.0pt;font-family:" courier="">"<span
class="SpellE"><span
class="GramE">org.eclipse.gmf.runtime.emf.core.util.IProxyEObject</span></span><span
 class="GramE">(</span><span
class="SpellE">org.eclipse.gmf.runtime.emf.core</span>)"</span><span
 style="font-size:9.0pt;font-family:" courier="">id=</span><span
style="font-size:9.0pt;font-family:" courier="">"<span
class="SpellE">YourSemanticType</span>"</span><span
style="font-size:9.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span style="font-size:9.0pt;font-family:"
courier="">&lt;method</span><span
style="font-size:9.0pt;font-family:" courier="">name=</span><span
style="font-size:9.0pt;font-family:" courier="">"<span
class="SpellE"><span
class="GramE">getProxyClassID</span></span><span
class="GramE">(</span>)"</span><span
style="font-size:9.0pt;font-family:" courier="">value=</span><span
style="font-size:9.0pt;font-family: " courier="">"&lt;<span
class="SpellE">YourSemanticType</span>&gt;"</span><span
style="font-size: 9.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:9.0pt; font-family:"
courier="">&lt;/method&gt;</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:9.0pt; font-family:"
courier="">&lt;/object&gt;</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;</span> &lt;<span
class="GramE">context</span>&gt;</span><span
style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;</span></span> <span
class="SpellE"><span style="font-size:9.0pt;font-family:"
courier="">viewClass</span></span><span
style="font-size:9.0pt;font-family:" courier="">=</span><span
style="font-size:9.0pt;font-family:" courier="">"<span
class="SpellE">org.eclipse.gmf.runtime.notation.Node</span>"</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span lang="FR" style="font-size:9.0pt;font-family:"
courier="">semanticHints=</span><span lang="FR"
style="font-size:9.0pt;font-family:" courier="">""</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span lang="FR" style="font-size:9.0pt;font-family:"
courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span lang="FR" style="font-size:9.0pt;font-family:"
courier="">elements=</span><span lang="FR"
style="font-size:9.0pt;font-family:" courier="">"Nodes"</span><span
lang="FR" style="font-size:9.0pt;font-family:"
courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span lang="FR" style="font-size:9.0pt;font-family:"
courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span lang="FR" style="font-size: 9.0pt;font-family:"
courier="">&lt;/context&gt;</span><span lang="FR"
style="font-size: 9.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.5in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span lang="FR" style="font-size:9.0pt;font-family: "
courier="">&lt;/viewProvider&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span lang="FR" style="font-size:9.0pt;font-family:"
courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;</span></span> <span
style="font-size:9.0pt; font-family:"
courier="">&lt;/extension&gt;</span></p>

<ol style="margin-top:0in" start="3" type="1">
<li class="MsoNormal"
style="color:black;mso-list:l6 level1 lfo9;tab-stops:list .5in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size: 10.0pt;font-family:Helv;mso-bidi-font-family:Helv">
In your new <span class="SpellE">ViewProvider</span> class,
override the method <span class="SpellE">getNodeViewClass</span> to
provide based on semantic element type.<span
style="mso-spacerun:yes">&nbsp;</span> I'm assuming there's
something specific about your semantic model that would allow you
to do this in a mutually exclusive manner.<span
style="mso-spacerun:yes">&nbsp;</span> Consequently you should make
the same</span> <span style="color:windowtext">conditional check
against the semantic property that was in the xml</span> <span
style="font-size:10.0pt;font-family:Helv; mso-bidi-font-family:Helv">
to avoid the other provider from kicking in.</span></li>
</ol>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span class="GramE"><span style="font-size:9.0pt;font-family: "
courier="">i.e.</span></span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">protected</span> Class <span
class="SpellE">getNodeViewClass</span>(<span
class="SpellE">IAdaptable</span> <span
class="SpellE">semanticAdapter</span>,</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
View <span class="SpellE">containerView</span>, String <span
class="SpellE">semanticHint</span>) {</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
Element el = <span class="SpellE"><span
class="GramE">getSemanticElement</span></span><span
class="GramE">(</span><span
class="SpellE">semanticAdapter</span>);</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
If (<span class="GramE">el !</span>= null) {</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
...</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
If (? /* check condition)</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
Return &lt;<span
class="SpellE">YourNewViewClass.class</span>&gt;<span
style="mso-tab-count: 1">&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier="">}</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">return</span> null;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<ol style="margin-top:0in" start="4" type="1">
<li class="MsoNormal"
style="color:black;mso-list:l6 level1 lfo9;tab-stops:list .5in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size: 10.0pt;font-family:Helv;mso-bidi-font-family:Helv">
Finally, you need to create a new View notation class of the class
you discovered in (1.).<span style="mso-spacerun:yes">&nbsp;</span>
Override <span
class="SpellE">AbstractNodeViewFactory#decorateView</span> in order
to change the default settings on the shape.<span
style="mso-spacerun:yes">&nbsp;</span> For instance if you want to
change the default visibility of certain compartments, you would do
the following</span></li>
</ol>

<p class="MsoNormal"
style="margin-left:1.0in;mso-layout-grid-align:none; text-autospace:none">
<span class="GramE"><span style="font-size:9.0pt;font-family: "
courier="">protected</span></span> <span
style="font-size:9.0pt; font-family:" courier="">void <span
class="SpellE">decorateView</span>(View <span
class="SpellE">containerView</span>, View <span
class="SpellE">view</span>,</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span class="SpellE"><span style="font-size:9.0pt; font-family:"
courier="">IAdaptable</span></span> <span
style="font-size:9.0pt;font-family:" courier=""><span
class="SpellE">semanticElement</span>, String <span
class="SpellE">semanticHint</span>, <span class="SpellE">int</span>
index,</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span class="SpellE"><span class="GramE"><span
style="font-size:9.0pt;font-family:"
courier="">boolean</span></span></span><span
style="font-size:9.0pt;font-family:" courier="">persisted)
{</span></p>

<p class="MsoNormal"
style="margin-left:1.5in;mso-layout-grid-align:none; text-autospace:none">
<span class="SpellE"><span class="GramE"><span
style="font-size:9.0pt;font-family:"
courier="">super.decorateView</span></span></span><span
class="GramE"><span style="font-size:9.0pt;font-family:"
courier="">(</span></span><span class="SpellE"><span
style="font-size:9.0pt;font-family:"
courier="">containerView</span></span><span
style="font-size:9.0pt;font-family:" courier="">, <span
class="SpellE">semanticAdapter</span>, <span
class="SpellE">semanticHint</span>, index, persisted);</span></p>

<p class="MsoNormal"
style="margin-left:1.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier="">View <span
class="SpellE">subView</span> =</span></p>

<p class="MsoNormal"
style="margin-left:2.0in;mso-layout-grid-align:none; text-autospace:none">
<span class="SpellE"><span class="GramE"><span
style="font-size:9.0pt;font-family:"
courier="">ViewUtil.getChildBySemanticHint</span></span></span><span
 class="GramE"><span style="font-size:9.0pt;font-family:"
courier="">(</span></span><span class="SpellE"><span
style="font-size:9.0pt;font-family:"
courier="">containerView</span></span><span
style="font-size:9.0pt;font-family:" courier="">, &lt;<span
class="SpellE">MySemanticHintString</span>&gt;);</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span class="GramE"><span style="font-size:9.0pt; font-family:"
courier="">if</span></span> <span
style="font-size: 9.0pt;font-family:" courier="">(<span
class="SpellE">subView</span>!= null) {</span></p>

<p class="MsoNormal"
style="margin-left:2.0in;mso-layout-grid-align:none; text-autospace:none">
<span class="SpellE"><span class="GramE"><span
style="font-size:9.0pt;font-family:"
courier="">subView.setVisible</span></span></span><span
class="GramE"><span style="font-size:9.0pt;font-family:"
courier="">(</span></span><span
style="font-size:9.0pt;font-family:" courier="">false);</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier="">}</span></p>

<p class="MsoNormal"
style="margin-left:.5in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span style="font-size:9.0pt;font-family:" courier="">}<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.5in;tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Helv;mso-bidi-font-family:Helv;color:black">
Alternatively you could override the method <span
class="SpellE">initializeFromPreferences</span> to retrieve values
from the users preference store and then initialize settings
accordingly.<span style="mso-spacerun:yes">&nbsp;</span> However,
this will get called before population of the contained views, so
it can only be used to initialize top level view settings. <span
class="GramE">i.e</span>. fill / outline color.</span><br />
<br />
<br />
</p>

<h2><a id="preferenceChange" name="preferenceChange">How to change
shape appearances based on a global preference change</a></h2>

<p class="MsoNormal"><font size="-1">[<a href="#top">back to
top</a>]</font></p>

<p class="MsoNormal"
style="margin-left:.25in;mso-layout-grid-align:none; text-autospace:none">
<span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family: Helv;color:black">
Often in a domain application it is useful to control shape
appearances at a global level.<span
style="mso-spacerun:yes">&nbsp;</span> This alleviates user
management of the individual shapes appearance and avoids
persistence issues.</span></p>

<p class="MsoNormal"
style="margin-left:.25in;mso-layout-grid-align:none; text-autospace:none">
<span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family: Helv;color:black">
The way to accomplish this is to have a global workspace preference
that your <span class="SpellE">EditPart</span> listens to and
responds accordingly.<b><span
style="mso-spacerun:yes">&nbsp;</span></b></span></p>

<p class="MsoNormal"
style="margin-left:.25in;mso-layout-grid-align:none; text-autospace:none">
<span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family: Helv;color:black">
1.<span style="mso-spacerun:yes">&nbsp;</span> First you need to
add a listener on your <span class="SpellE">EditPart</span>
controller (please refer to Eclipse on-line help for adding an
application specific preference store).<span
style="mso-spacerun:yes">&nbsp;</span> To do <span
class="GramE">this add</span> a nested class in your <span
class="SpellE">EditPart</span> that implements the <span
class="SpellE">IPropertyChangeListener</span> interface for
listening to the Preference store.</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;</span> <span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/**</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
* Listener for the <span
class="SpellE">PreferenceStore</span>.</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
* Listen and respond for changes to the</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
* <span class="GramE">preference</span> store value.</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
*</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
*/</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">protected</span> class <span
class="SpellE">PreferencePropertyChangeListener</span></span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">implements</span> <span
class="SpellE">IPropertyChangeListener</span> {</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">public</span> void <span
class="SpellE">propertyChange</span>(<span
class="SpellE">PropertyChangeEvent</span> event) {</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
// if the property is not the event we're interested in
then</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
// do nothing, return <span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">if</span> (event</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
.<span class="SpellE"><span
class="GramE">getProperty</span></span><span
class="GramE">()</span></span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
.<span class="GramE">equals(</span>&lt;<span
class="SpellE">MyPreferenceIdentifier</span>&gt;)) {</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/* call appropriate refresh method */</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">refreshGlobalPreferenceAttribute</span></span><span
class="GramE">(</span>);</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">getFigure</span></span><span
class="GramE">(</span>).repaint();</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}<span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.25in;mso-layout-grid-align:none; text-autospace:none">
<span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family: Helv;color:black">
2.<span style="mso-spacerun:yes">&nbsp;</span> Next you need to add
this new class as a listener to the property store.</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/**</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>* Initializes the <span
class="SpellE">preferenceStore</span> property change</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>* <span
class="GramE">listener</span>.</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>*/</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">private</span> void <span
class="SpellE">initPreferenceStoreListener</span>() {</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">preferenceListener</span></span> = new <span
class="SpellE">PreferencePropertyChangeListener</span>();</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>IPreferenceStore
preferenceStore = (IPreferenceStore)
getDiagramPreferencesHint().getPreferenceStore();</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">preferenceStore.addPropertyChangeListener</span></span><span
 class="GramE">(</span><span
class="SpellE">preferenceListener</span>);</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">protected</span> void <span
class="SpellE">addNotationalListeners</span>() {</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">super.addNotationalListeners</span></span><span
class="GramE">(</span>);</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="SpellE"><span class="GramE"><span
style="font-size:9.0pt;font-family:"
courier="">initPreferenceStoreListener</span></span></span><span
class="GramE"><span style="font-size:9.0pt;font-family:"
courier="">(</span></span><span
style="font-size:9.0pt;font-family:" courier="">);</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"
style="margin-left:.25in;mso-layout-grid-align:none; text-autospace:none">
<span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family: Helv;color:black">
3.<span style="mso-spacerun:yes">&nbsp;</span> Then you need to
handle the property change event in a method.<span
style="mso-spacerun:yes">&nbsp;</span> This requires retrieving the
preference global value from the store and then making the
appropriate changes to the figure to reflect the global
value.</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/**</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>* Refreshes this
classifier node figure's gradient fill to reflect</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>* <span
class="GramE">the</span> preference store value for gradient
fill.</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>*/</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">protected</span> void <span
class="SpellE">refreshGlobalPreferenceAttribute</span>()
{</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>IPreferenceStore
preferenceStore = (IPreferenceStore)
getDiagramPreferencesHint().getPreferenceStore();</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
//refresh gradient</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span class="GramE">boolean</span></span>
<span class="SpellE">myGlobalPreference</span> = true;</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">myGlobalPreference</span></span> = <span
class="SpellE">preferenceStore.getBoolean</span>( &lt;<span
class="SpellE">MyPreferenceIdentifier</span>&gt;);<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
?</span></p>

<p class="MsoNormal"
style="tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/* do figure synchronization */</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">getFigure</span></span><span
class="GramE">(</span>).repaint();</span></p>

<p class="MsoNormal"
style="margin-left:.25in;tab-stops:0in .25in .75in 1.25in 1.75in 2.25in 2.75in 3.25in; mso-layout-grid-align:none;text-autospace:none">
<span style="font-size:9.0pt; font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p><br />
</p>

<h2><a id="overrideConnectionLook"
name="overrideConnectionLook">How to override the look of a
connection</a></h2>

<p class="MsoNormal"><font size="-1">[<a href="#top">back to
top</a>]</font></p>

<p class="MsoNormal">To accomplish this you need to hook into the
controller of the connection which is the <span
class="SpellE">EditPart</span> which synchronizes the model and
figure worlds.<span style="mso-spacerun:yes">&nbsp;</span> You need
to create a new <span class="SpellE">EditPart</span> provider which
is registered against the <span
class="SpellE">EditPartService</span> that will override the
existing <span class="SpellE">EditPart</span> provider to provide a
new <span class="SpellE">EditPart</span> for the connection shape
you're interested in.</p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;color:black">Similar to the View service
extensions, the <span class="SpellE">EditPart</span> provider
consists of 3 different components.<span
style="mso-spacerun:yes">&nbsp;</span></span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;color:black">1. The xml descriptor
specification of the extension in the plug-<span
class="SpellE">in.xml</span> file.</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;color:black">2. The provider class which is
specified by the xml and provides the mapping of the type to your
<span class="SpellE">EditPart</span> class</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;color:black">3. The actual <span
class="SpellE">EditPart</span> class that will override the
existing behavior.</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family:Helv;color:black">
First the xml:</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:"
courier="">&lt;/extension&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt; font-family:"
courier="">&lt;extension</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:10.0pt;font-family:"
courier="">point</span></span><span
style="font-size:10.0pt;font-family:" courier="">=</span><span
style="font-size:10.0pt;font-family:" courier="">"<span
class="SpellE">org.eclipse.gmf.runtime.diagram.ui.editpartProviders</span>"</span><span
 style="font-size:10.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt; font-family:" courier="">&lt;<span
class="SpellE">editpartProvider</span></span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:10.0pt;font-family:"
courier="">class</span></span><span
style="font-size:10.0pt;font-family:" courier="">=</span><span
style="font-size:10.0pt;font-family:" courier="">"com.&lt;<span
class="SpellE">myPath</span>&gt;.<span
class="SpellE">MyOverrideProvider</span>"</span><span
style="font-size:10.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt; font-family:"
courier="">&lt;Priority</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:10.0pt;font-family:"
courier="">name</span></span><span
style="font-size:10.0pt;font-family:" courier="">=</span><span
style="font-size:10.0pt;font-family:" courier="">"Low"</span><span
style="font-size:10.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt; font-family:"
courier="">&lt;/Priority&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt; font-family:"
courier="">&lt;object</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:10.0pt;font-family:"
courier="">class</span></span><span
style="font-size:10.0pt;font-family:" courier="">=</span><span
style="font-size:10.0pt;font-family:" courier="">"<span
class="SpellE">org.eclipse.gmf.runtime.notation.Edge</span>"</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:10.0pt;font-family:"
courier="">id</span></span><span
style="font-size:10.0pt;font-family:" courier="">=</span><span
style="font-size:10.0pt;font-family:" courier="">"<span
class="SpellE">MyConnectionOverride</span>"</span><span
style="font-size: 10.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size: 10.0pt;font-family:"
courier="">&lt;method</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:10.0pt;font-family:"
courier="">name</span></span><span
style="font-size:10.0pt;font-family:" courier="">=</span><span
style="font-size:10.0pt;font-family:" courier="">"<span
class="SpellE">getElement</span>()"</span><span
style="font-size:10.0pt; font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt;font-family:"
courier="">&lt;value</span> <span
style="font-size:10.0pt;font-family:" courier="">class=</span><span
style="font-size:10.0pt;font-family:" courier="">"&lt;class path to
semantic element&gt;"</span><span
style="font-size:10.0pt; font-family:" courier="">/&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt; font-family:"
courier="">&lt;/method&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt; font-family:"
courier="">&lt;/object&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt;font-family:"
courier="">&lt;context</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span class="GramE"><span style="font-size:10.0pt;font-family:"
courier="">views</span></span><span
style="font-size:10.0pt;font-family:" courier="">=</span><span
style="font-size:10.0pt;font-family:" courier="">"<span
class="SpellE">MyConnectionOverride</span>"</span><span
style="font-size: 10.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt; font-family:"
courier="">&lt;/context&gt;</span><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:10.0pt; font-family:" courier="">&lt;/<span
class="SpellE">editpartProvider</span>&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;</span></span> <span
style="font-size:10.0pt; font-family:"
courier="">&lt;/extension&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family:Helv;color:black">
In this descriptor we are specifying the provider class that and a
priority level that the provider will be at relative to other
providers.<span style="mso-spacerun:yes">&nbsp;</span> In this
case, we know that the existing provider for the relationship is at
the "Lowest" priority, so we can provide ours at one level higher -
i.e. "Low".<span style="mso-spacerun:yes">&nbsp;</span> The object
tag lets us specify the view category we're supplying the <span
class="SpellE">EditPart</span> for and the criteria under which our
provider will be loaded.<span
style="mso-spacerun:yes">&nbsp;</span> In this case, we chose a
broad criteria and our provider will be loaded when the connection
is of the semantic relationship we expect.<span
style="mso-spacerun:yes">&nbsp;</span> In the actual java code of
our provider class we can restrict the actual criteria to be based
<span class="GramE">on a more strict criteria</span>, such as some
aspect or property of the semantic relationship.<span
style="mso-spacerun:yes">&nbsp;</span></span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family:Helv;color:black">
Next the provider class is fairly straightforward.<span
style="mso-spacerun:yes">&nbsp;</span> It extends from the abstract
class <span class="SpellE">AbstractEditPartProvider</span> and
overrides the method for retrieving the connection <span
class="SpellE">editpart</span>.<span
style="mso-spacerun:yes">&nbsp;</span> In the following example,
it's providing a custom <span class="SpellE">EditPart</span> when
the shape has a particular keyword installed.<span
style="mso-spacerun:yes">&nbsp;</span> More commonly, you would
switch based on the semantic type which is set to the value you've
defined in your <span
class="SpellE">IElementType</span>.</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span class="GramE"><span
style="font-size:10.0pt;font-family:Courier;mso-bidi-font-family:Courier; color:black">
public</span></span><span
style="font-size:10.0pt;font-family: Courier;mso-bidi-font-family:Courier;color:black">
class <span class="SpellE">MyEditPartProvider</span> extends <span
class="SpellE">AbstractEditPartProvider</span> {<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">protected</span> Class <span
class="SpellE">getEdgeEditPartClass</span>(View <span
class="SpellE">view</span>) {</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE">EObject</span> el = <span class="SpellE"><span
class="GramE">view.getElement</span></span><span
class="GramE">(</span>);</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">if</span> (el != null &amp;&amp; el <span
class="SpellE">instanceof</span> &lt;<span
class="SpellE">MySemanticElement</span> class&gt; ) {</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">if</span> (? &lt;some condition is <span
class="SpellE">satisified</span>&gt; )</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">return</span> <span
class="SpellE">MyCustomEditPart.class</span>;</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">return</span> null;</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
}</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family:Helv;color:black">
Finally we can look at the <span class="SpellE">EditPart</span>
class itself.<span style="mso-spacerun:yes">&nbsp;</span> In this
case we are only interested in overriding the look of the
connection.<span style="mso-spacerun:yes">&nbsp;</span>
Consequently, we have to override the method that creates the
figure in the connection edit part.<span
style="mso-spacerun:yes">&nbsp;</span> This method is the <span
class="SpellE"><span
class="GramE">createConnectionFigure</span></span><span
class="GramE">(</span>).<span
style="mso-spacerun:yes">&nbsp;</span> Then we simply use the
appropriate Draw2d API's to instantiate a different <span
class="SpellE">polyline</span> figure with the look we
desire:</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span class="GramE"><span
style="font-size:10.0pt;font-family:Courier;mso-bidi-font-family:Courier; color:black">
public</span></span><span
style="font-size:10.0pt;font-family: Courier;mso-bidi-font-family:Courier;color:black">
class <span class="SpellE">MyCustomEditPart</span> extends <span
class="SpellE">OriginalEditPart</span> {</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/**</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>* @<span
class="SpellE">param</span> view</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>*/</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">public</span> <span
class="SpellE">MyCustomEditPart</span> (View <span
class="SpellE">view</span>) {</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">super(</span>view);</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
// TODO Auto-generated constructor stub</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">protected</span> Connection <span
class="SpellE">createConnectionFigure</span>() {</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE">PolylineConnectionEx</span> <span
class="SpellE">conn</span> = new <span class="SpellE"><span
class="GramE">PolylineConnectionEx</span></span><span
class="GramE">(</span>);</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">conn.setLineStyle</span></span><span
class="GramE">(</span><span
class="SpellE">Graphics.LINE_SOLID</span>);</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE">OpenArrowDecoration</span> <span
class="SpellE">sourceDecorative</span> = new <span
class="SpellE"><span
class="GramE">OpenArrowDecoration</span></span><span
class="GramE">(</span>);</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">sourceDecorative.setTemplate</span></span><span
class="GramE">(</span><span
class="SpellE">OpenArrowDecoration.TRIANGLE_TIP</span>);</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">sourceDecorative.setScale</span></span><span
class="GramE">(</span><span
class="SpellE">MapMode.DPtoLP</span>(10),<span
class="SpellE">MapMode.DPtoLP</span>(5));</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">sourceDecorative.setLineStyle</span></span><span
class="GramE">(</span><span
class="SpellE">Graphics.LINE_SOLID</span>);</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">conn.setSourceDecoration</span></span><span
class="GramE">(</span><span
class="SpellE">sourceDecorative</span>);</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">return</span> <span
class="SpellE">conn</span>;</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
<span style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"
style="tab-stops:0in .5in 1.0in 1.5in 2.0in 2.5in 3.0in; mso-layout-grid-align:none;text-autospace:none">
<span
style="font-size:10.0pt; font-family:Courier;mso-bidi-font-family:Courier;color:black">
}</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:Arial;color:black">Then when
you create the relationship which fits the new <span
class="SpellE">critera</span> of the xml and provider, then it will
render using the new figure you created in the custom <span
class="SpellE">EditPart</span>.</span></p>

<p><br />
</p>

<h2><span class="GramE"><span
style="mso-bookmark: _Toc105513761"><a id="readOnlyViews"
name="readOnlyViews">How to open multiple read-only views on a
diagram</a></span></span><br />
<font size="-1">[<a href="#top">back to top</a>]</font></h2>

<p class="MsoNormal">It is possible to view the same notation data
in 2 different viewers.<span style="mso-spacerun:yes">&nbsp;</span>
Since GEF / GMF implements the MFC design pattern, it is a simple
matter to view the same data in different viewers.<span
style="mso-spacerun:yes">&nbsp;</span> The "Model" (Notation) is
the same in both viewers and synchronized with different "View"
(Figure) data through unique controllers (<span
class="SpellE">EditParts</span>) in each viewer.</p>

<p><br />
<span style="mso-bookmark:_Toc105513762">Creating a read-only
viewer of an existing diagram</span></p>

<p><br />
If you wish to have a read-only view of the diagram, this is
probably well suited to be displayed in an Eclipse View instead of
a full-fledged editor.</p>

<p class="MsoNormal">In your implementation of the <span
class="SpellE">IViewPart</span> the <span
class="SpellE">createPartControl</span> would create the Viewer to
display the diagram.<span style="mso-spacerun:yes">&nbsp;</span>
The <span class="SpellE">DiagramEditPart</span> is retrieved and
explicitly set to disable the <span class="SpellE">EditMode</span>
capability.<span style="mso-spacerun:yes">&nbsp;</span> It is a
perquisite that a <span class="SpellE">DiagramView</span> object is
?in-hand?.<span style="mso-spacerun:yes">&nbsp;</span> This could
be retrieved by invoking an action from the Diagram element in the
Model Explorer.</p>

<p class="MsoNormal">// the assumption of this method is that the
<span class="SpellE">DiagramView</span> has been pre-loaded</p>

<p class="MsoNormal"><span class="GramE"><span
style="font-size:8.0pt;font-family: "
courier="">private</span></span> <span
style="font-size:8.0pt;font-family: " courier=""><span
class="SpellE">GraphicalViewer</span> viewer;</span></p>

<p class="MsoNormal"><span class="GramE"><span
style="font-size:8.0pt;font-family: "
courier="">private</span></span> <span
style="font-size:8.0pt;font-family: " courier=""><span
class="SpellE">GraphicalViewer</span> viewer;</span></p>

<p class="MsoNormal"><span class="GramE"><span
style="font-size:8.0pt;font-family: "
courier="">public</span></span> <span
style="font-size:8.0pt;font-family: " courier="">class <span
class="SpellE">TraceDiagramGraphicalViewer</span> extends <span
class="SpellE">DiagramGraphicalViewer</span> {</span></p>

<p class="MsoNormal" style="margin-left:.5in"><span
style="font-size:8.0pt; font-family:" courier="">// no
implementatio<span
style="mso-bidi-font-weight: bold;mso-bidi-font-style:italic">n.<span
 style="mso-spacerun:yes">&nbsp;</span> This class is extended
from</span></span></p>

<p class="MsoNormal" style="margin-left:.5in"><span
style="font-size:8.0pt; font-family:" courier="">//</span> <span
class="SpellE"><span style="font-size:8.0pt;font-family:"
courier="">DiagramGraphicalViewer</span></span> <span
style="font-size:8.0pt;font-family:" courier="">for type
information only.</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier="">}</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"><span class="GramE"><span
style="font-size:8.0pt;font-family: "
courier="">public</span></span> <span
style="font-size:8.0pt;font-family: " courier="">void <span
class="SpellE">createPartControl</span>(Composite comp)
{</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">viewer</span> = new <span
class="SpellE">TraceDiagramGraphicalViewer</span>();</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">viewer.createControl</span></span><span
class="GramE">(</span>comp);</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">viewer.getControl</span></span><span
class="GramE">(</span>).<span
class="SpellE">setBackground</span>(<span
class="SpellE">ColorConstants.listBackground</span>);</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE">DiagramEditDomain</span> <span
class="SpellE">editDomain</span> = new <span class="SpellE"><span
class="GramE">DiagramEditDomain</span></span><span
class="GramE">(</span>null);</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">editDomain.setCommandStack</span></span><span
class="GramE">(</span>new <span
class="SpellE">DiagramCommandStack</span>(<span
class="SpellE">editDomain</span>));</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">viewer.setEditDomain</span></span><span
class="GramE">(</span><span
class="SpellE">editDomain</span>);</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">viewer.setRootEditPart</span></span><span
class="GramE">(</span>new <span
class="SpellE">DiagramRootEditPart</span>());</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">viewer.setEditPartFactory</span></span><span
class="GramE">(</span><span
class="SpellE">EditPartService.getInstance</span>());</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">viewer.setContents</span></span><span
class="GramE">(<span
class="SpellE">GeoDiagramEditor.diagView</span>));</span></span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">viewer.flush</span></span><span
class="GramE">(</span>);</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<b style="mso-bidi-font-weight:normal">// now disable
editing</b></span></p>

<p class="MsoNormal"><b style="mso-bidi-font-weight:normal"><span
style="font-size:8.0pt;font-family:" courier=""><span
style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">Assert.isTrue</span></span><span
class="GramE">(</span><span
class="SpellE">viewer.getContents</span>() <span
class="SpellE">instanceof</span> <span
class="SpellE">DiagramEditPart</span>);</span></b></p>

<p class="MsoNormal"><b style="mso-bidi-font-weight:normal"><span
style="font-size:8.0pt;font-family:" courier=""><span
style="mso-tab-count: 2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
 class="SpellE">DiagramEditPart</span> <span
class="SpellE">diagEP</span> = (<span
class="SpellE">DiagramEditPart</span>) <span class="SpellE"><span
class="GramE">viewer.getContents</span></span><span
class="GramE">(</span>);</span></b></p>

<p class="MsoNormal"><b style="mso-bidi-font-weight:normal"><span
style="font-size:8.0pt;font-family:" courier=""><span
style="mso-tab-count: 1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">diagEP.disableEditMode</span></span><span
class="GramE">(</span>);</span></b><br />
</p>

<h3 class="MsoNormal"><br />
 <a id="_Toc1055137640" name="_Toc1055137640">Screen snapshot of
multiple views of diagram:</a><br />
<span style="font-size:10.0pt;font-family:" courier=""><img
border="0" width="570" height="499" src="multipleview.jpg" /></span><br />
<br />
<a id="_Toc105513763" name="_Toc105513763"></a></h3>

<h2 class="MsoNormal"><a id="changeColor" name="changeColor">How
to</a> <span style="mso-bookmark:_Toc105513763">change the color of
a shape dynamically</span><br />
<font size="-1">[<a href="#top">back to top</a>]</font></h2>

<p class="MsoNormal">In the example <a
href="#readOnlyViews0">#<span class="GramE">Creating</span> a
read-only viewer of an existing diagram</a> it is necessary to
create a new <span class="SpellE">GraphicalViewer</span> class
(<span class="SpellE">TraceDiagramGraphicalViewer</span>) for the
type information to distinguish <span
class="SpellE">EditParts</span> hosted in a regular editor vs. a
custom Viewer to allow for animation.<span
style="mso-spacerun:yes">&nbsp;</span> Changing the colors of
individual <span class="SpellE">EditParts</span> can be achieved
dynamically by installing an <span class="SpellE">EditPolicy</span>
on the <span class="SpellE">EditParts</span> condition on them
being owned by the new Viewer class above.<br />
<br />
The <span class="SpellE">EditPolicy</span> will then listen to the
appropriate condition and change the color of the <span
class="SpellE">EditPart's</span> figures accordingly.<span
style="mso-spacerun:yes">&nbsp;</span><br />
<br />
First we need to define an <span
class="SpellE">EditPolicyProvider</span> that will install this new
<span class="SpellE">editpolicy</span>.<span
style="mso-spacerun:yes">&nbsp;</span> The Extension code in the
<span class="SpellE">plugin.xml</span> would look something like
the following:<br />
</p>

<div
style="border:solid windowtext 1.0pt;mso-border-alt:solid windowtext .75pt; padding:4.0pt 4.0pt 4.0pt 4.0pt;margin-left:48.0pt;margin-right:24.0pt">
<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:8.0pt;font-family:"
courier="">&lt;extension</span><br />
&nbsp;&nbsp;<span class="GramE"><span
style="font-size:8.0pt;font-family: "
courier="">id</span></span><span
style="font-size:8.0pt;font-family:" courier="">=</span><span
style="font-size:8.0pt;font-family:" courier="">"<span
class="SpellE">TraceEditPolicyProvider</span>"</span><br />
<span class="GramE"><span style="font-size:8.0pt;font-family: "
courier="">name</span></span><span
style="font-size:8.0pt;font-family:" courier="">=</span><span
style="font-size:8.0pt;font-family:" courier="">"<span
class="SpellE">TraceEditPolicyProvider</span>"</span><br />
<span class="GramE"><span style="font-size:8.0pt;font-family: "
courier="">point</span></span><span
style="font-size:8.0pt;font-family:" courier="">=</span><span
style="font-size:8.0pt;font-family:" courier="">"<span
class="SpellE">org.eclipse.gmf.runtime.diagram.ui.editpolicyProviders</span>"</span><span
 style="font-size:8.0pt;font-family:" courier="">&gt;</span><br />
<span style="font-size:8.0pt;font-family:" courier="">&lt;<span
class="SpellE">editpolicyProvider</span></span> <span
class="GramE"><span style="font-size:8.0pt; font-family:"
courier=""><br />
class</span></span><span style="font-size:8.0pt;font-family:"
courier="">=</span><span style="font-size:8.0pt;font-family:"
courier="">"&lt;package namespace&gt;.<span
class="SpellE">TraceDiagramEditPolicyProvider</span>"</span><span
style="font-size:8.0pt;font-family:" courier="">&gt;</span><br />
<span style="font-size:8.0pt;font-family:"
courier="">&lt;Priority</span><br />
<span class="GramE"><span style="font-size:8.0pt; font-family:"
courier="">name</span></span><span
style="font-size:8.0pt;font-family:" courier="">=</span><span
style="font-size:8.0pt;font-family:" courier="">"Low"</span><span
style="font-size:8.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="text-indent:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:8.0pt;font-family:"
courier="">&lt;/Priority&gt;</span></p>

<p class="MsoNormal"
style="text-indent:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:8.0pt;font-family:"
courier="">&lt;object</span></p>

<p class="MsoNormal"
style="margin-left:.5in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span class="GramE"><span style="font-size:8.0pt; font-family:"
courier="">class</span></span><span
style="font-size:8.0pt;font-family:" courier="">=</span><span
style="font-size:8.0pt;font-family:" courier="">"<span
class="SpellE">org.eclipse.gmf.runtime.diagram.ui.editparts.IGraphicalEditPart</span>"</span></p>

<p class="MsoNormal"
style="margin-left:.5in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span class="GramE"><span style="font-size:8.0pt; font-family:"
courier="">id</span></span><span
style="font-size:8.0pt;font-family:" courier="">=</span><span
style="font-size:8.0pt;font-family:" courier="">"<span
class="SpellE">TraceEditPart</span>"</span><span
style="font-size:8.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span style="font-size:8.0pt;font-family:"
courier="">&lt;method</span><span
style="font-size:8.0pt;font-family:" courier="">name=</span><span
style="font-size:8.0pt;font-family:" courier="">"<span
class="SpellE"><span class="GramE">getViewer</span></span><span
class="GramE">(</span>)"</span><span
style="font-size:8.0pt;font-family: " courier="">&gt;</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:8.0pt;font-family:" courier=""><span
style="mso-spacerun:yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span>
<span style="font-size:8.0pt;font-family:"
courier="">&lt;</span><span style="font-size:8.0pt;font-family:"
courier="">value class<span
style="color:navy;background:white;mso-highlight:white">=</span><span
 style="color:green;background:white;mso-highlight:white">"</span><span
 style="color:navy;background:white;mso-highlight:white">=</span><span
 style="color:green;background:white;mso-highlight:white">"&lt;package
namespace&gt;.<span
class="SpellE">TraceDiagramGraphicalViewer</span>"</span><span
style="color:navy;background:white;mso-highlight:white">/&gt;</span></span></p>

<p class="MsoNormal"
style="margin-left:.5in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span style="font-size:8.0pt;font-family:"
courier="">&lt;/method&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span style="font-size:8.0pt;font-family:"
courier="">&lt;/object&gt;</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span style="font-size:8.0pt;font-family:"
courier="">&lt;context</span></p>

<p class="MsoNormal"
style="margin-left:1.5in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span class="SpellE"><span class="GramE"><span
style="font-size:8.0pt;font-family:"
courier="">editparts</span></span></span><span
style="font-size:8.0pt; font-family:" courier="">=</span><span
style="font-size:8.0pt;font-family:" courier="">"<span
class="SpellE">TraceEditPart</span>"</span><span
style="font-size:8.0pt;font-family:" courier="">&gt;</span></p>

<p class="MsoNormal"
style="margin-left:1.0in;text-indent:.5in;mso-layout-grid-align: none;text-autospace:none">
<span style="font-size:8.0pt;font-family:"
courier="">&lt;/context&gt;</span></p>

<p class="MsoNormal"
style="margin-left:.5in;mso-layout-grid-align:none; text-autospace:none">
<span style="font-size:8.0pt;font-family:" courier="">&lt;/<span
class="SpellE">editpolicyProvider</span>&gt;</span></p>

<p class="MsoNormal"><span style="font-size:8.0pt;font-family:"
courier=""><span
style="mso-spacerun:yes">&nbsp;</span>&lt;/extension&gt;</span></p>
</div>

<div class="Section1"><font face="Courier New"><br />
</font><font face="Times New Roman">Finally, the <span
class="SpellE">EditPolicy</span> class itself can be defined.<span
style="mso-spacerun:yes">&nbsp;</span> In this particular example,
we are adding a mouse listener <span class="GramE">the
allows</span> us to trace mouse movement entering and exiting the
host <span class="SpellE">EditPart</span>.<span
style="mso-spacerun:yes">&nbsp;</span> On entry, we color the
figure to red and on exit set it back to the original
color.</font><font face="Courier New"><br />
<br />
</font> 

<div
style="border:solid windowtext 1.0pt;mso-border-alt:solid windowtext .75pt; padding:4.0pt 4.0pt 4.0pt 4.0pt;margin-left:48.0pt;margin-right:24.0pt">
<p class="MsoNormal"><span class="GramE"><span
style="font-size:10.0pt;font-family: "
courier="">public</span></span> <span
style="font-size:10.0pt;font-family: " courier="">class <span
class="SpellE">TraceDiagramEditPolicy</span> extends <span
class="SpellE">GraphicalEditPolicy</span> {</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
class="GramE">private</span> class <span
class="SpellE">TraceMouseMotionListener</span> extends <span
class="SpellE">MouseMotionListener.Stub</span> {</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">private</span> Color <span
class="SpellE">color</span>;</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/**</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>* @see
com.ibm.etools.draw2d.MouseMotionListener#<span
class="GramE">mouseEntered(</span><span
class="SpellE">MouseEvent</span>)</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>*/</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">public</span> void <span
class="SpellE">mouseEntered</span>(<span
class="SpellE">MouseEvent</span> me) {</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">color</span> = <span
class="SpellE">getHostFigure</span>().<span
class="SpellE">getForegroundColor</span>();</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">getHostFigure</span></span><span
class="GramE">(</span>).<span
class="SpellE">setForegroundColor</span>(new Color(null, new
RGB(255, 0, 0)));</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">getHostFigure</span></span><span
class="GramE">(</span>).invalidate();</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/**</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>* @see
com.ibm.etools.draw2d.MouseMotionListener#<span
class="GramE">mouseExited(</span><span
class="SpellE">MouseEvent</span>)</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>*/</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">public</span> void <span
class="SpellE">mouseExited</span>(<span
class="SpellE">MouseEvent</span> me) {</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">getHostFigure</span></span><span
class="GramE">(</span>).<span
class="SpellE">setForegroundColor</span>(color);</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">getHostFigure</span></span><span
class="GramE">(</span>).invalidate();</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> /**
mouse motion listener for the owner shape and handles */</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
class="GramE">private</span> <span
class="SpellE">TraceMouseMotionListener</span> <span
class="SpellE">myMouseListener</span> = new <span
class="SpellE">TraceMouseMotionListener</span>();</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/**</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
style="mso-spacerun:yes">&nbsp;</span>*</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
style="mso-spacerun:yes">&nbsp;</span>* @see <span
class="SpellE">org.eclipse.gef.EditPolicy#<span
class="GramE">activate</span></span><span
class="GramE">()</span></span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
style="mso-spacerun:yes">&nbsp;</span>*/</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
class="GramE">public</span> void activate() {</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">super.activate</span></span><span
class="GramE">(</span>);</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">getHostFigure</span></span><span
class="GramE">(</span>).<span
class="SpellE">addMouseMotionListener</span>(<span
class="SpellE">myMouseListener</span>);</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/**</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
style="mso-spacerun:yes">&nbsp;</span>*</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
style="mso-spacerun:yes">&nbsp;</span>* @see <span
class="SpellE">org.eclipse.gef.EditPolicy#<span
class="GramE">deactivate</span></span><span
class="GramE">()</span></span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
style="mso-spacerun:yes">&nbsp;</span>*/</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span
class="GramE">public</span> void deactivate() {</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">getHostFigure</span></span><span
class="GramE">(</span>).<span
class="SpellE">removeMouseMotionListener</span>(<span
class="SpellE">myMouseListener</span>);</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="SpellE"><span
class="GramE">super.deactivate</span></span><span
class="GramE">(</span>);</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>

<p class="MsoNormal"><span style="font-size:10.0pt;font-family:"
courier="">}</span></p>
</div>

<font face="Courier New"><br />
</font> 

<h2><span class="GramE"><span class="GramE"><span
style="mso-bookmark: _Toc105513761"><a id="shapeResizable"
name="shapeResizable">How to make a shape resizable vs.
non-resizable</a><br />
</span></span></span><font size="-1">[<a href="#top">back to
top</a>]</font></h2>

<h4><a id="_Toc1042732470" name="_Toc1042732470">How do I make a
shape resizable?</a></h4>

Shapes subclassed from ShapeEditPart are resizable by default.<span
style="mso-spacerun:yes">&nbsp;</span> The resizable editpolicy is
a special case in that it is installed via the LayoutEditPolicy on
the diagram in the routine createChildEditPolicy.<span
style="mso-spacerun:yes">&nbsp;</span> The GMF diagram layer has
<span class="GramE">it's</span> own LayoutEditPolicy called
XYLayoutEditPolicy which calls inside createChildEditPolicy a
public method of ShapeEditPart called
getPrimaryDragEditPolicy.<span
style="mso-spacerun:yes">&nbsp;</span> The default implementation
returns a ResizableShapeEditPolicy which supports the drag resize
handles.<br />
<br />
If the shape doesn't appear to be resizable, make sure that you're
not overriding the getPrimaryDragEditPolicy method in your EditPart
and / or set a breakpoint there to make sure it's returning the
ResizableShapeEditPolicy.<br />
<h4><a id="_Toc1042732480" name="_Toc1042732480">How do I make a
shape non-resizable?</a><br />
<br />
<span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family: Helv;color:black">
Override the getPrimaryDragEditPolicy in your EditPart to return
the NonResizableEditPolicyEx</span></h4>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:10.0pt;font-family:Helv;mso-bidi-font-family:Helv;color:black">
Example (in LEDEditPart):</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:8.0pt;font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
/**</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:8.0pt;font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>* @see
org.eclipse.gmf.runtime.diagram.ui.editparts.ShapeEditPart#<span
class="GramE">getPrimaryDragEditPolicy()</span></span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:8.0pt;font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span style="mso-spacerun:yes">&nbsp;</span>*/</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:8.0pt;font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">public</span> EditPolicy
getPrimaryDragEditPolicy() {</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:8.0pt;font-family:" courier=""><span
style="mso-tab-count:2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
<span class="GramE">return</span> new
NonResizableEditPolicyEx();</span></p>

<p class="MsoNormal"
style="mso-layout-grid-align:none;text-autospace:none"><span
style="font-size:8.0pt;font-family:" courier=""><span
style="mso-tab-count:1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
}</span></p>
</div>

<br />
<br />
<hr />
<p><a href="http://www.eclipse.org/legal/epl-v10.html">Copyright
(c) 2000,2005 IBM Corporation and others. All Rights
Reserved.</a></p>

<hr />
<br />
<br />
<br />
<br />
</body>
</html>

